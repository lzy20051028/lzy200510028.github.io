---
layout:     post
title:      数据陷阱：技术过失2.2
subtitle:   陷阱：失落的数据---缺失值
date:       2020-07-24
author:     刘政永Dmer
header-img: img/post-bg-dmers.jpg
catalog: true
tags:
    - 听取树蛙一篇
---

## 陷阱：失落的数据---缺失值

上一部分谈的是对数据集的外部边界没有清晰认识在汇总和组间比较时出现的问题， 这里把目光转向数据内部，谈一下缺失值。与以往不同的是，我们看一个相对文艺一点的例子。

这个例子与Avoiding data pitfalls的作者Ben Jones的个人兴趣有很大关系。Ben很喜欢美国文学家埃德加·爱伦·坡（Edgar Allan Poe）的作品，想分析一下其全集，目的在于看下在他的一生中，作为一个多产的作家：总共写了多少作品或发表了多少作品， 他在什么年龄开始和停止写作，以及是否有某段时间他的创作渐显乏力。

Ben在维基百科上无意中发现了这位文学家的全部参考书目(数据来源：https://en.wikipedia.org/wiki/Edgar_Allan_Poe_bibliography.)， 其中包含了已知的每一部作品的表格， 这些表格按文学类型和写作日期进行排列。总共大约有150件作品，但其中有一些是有争议的，Ben猜测会有几十个。

维基百科页面上的表格有的提供特定作品的完整日期，有的只列出月份和年份，有的只列出年份。 把这些表格稍微整理一下，按年创建一个埃德加·爱伦·坡作品总数的时间轴，如下图所示

![]({{site.baseurl}}/img/post-bg-qsz1.jpg)

可以看到，他在1824年开始写作，那一年将满15岁，一直写作到他去世，1849年。 看起来他最多产的一年，包含很多不同作品，是1845年，一共写了13篇。现在，看一下他职业生涯中哪一年创作的作品最少。

看下时间轴上的最低点，也就是值为1的1824和1825年间，只写了一部文学作品。 那时候他还是个青少年，似乎答案就是这个了。然而，那并不是他创作文学作品最少的年代。我们还是要更仔细的观察一下，就像福尔摩斯检查犯罪现场一样。

顺着x轴的年份检查一下，会注意到这个时间序列中少了三年。在x轴上没有1826、1828和1830的值。 在那些年里，显然什么也没发表。还有个数据处理的问题：做这张图时，年份的格式并没有转化成时间格式， 因此就更难注意到这些年份从时间线中消失了，即使线图的偏度很明显。

为了显示出那些失落的年代，设置一下数据的格式或者根据各自的可视化工具进行相应调整， 这里用tableau作图如下所示。

![]({{site.baseurl}}/img/post-bg-qsz2.jpg)

为了更进一步的清晰显示失落的年代，再做一张柱形图，如下图所示：

![]({{site.baseurl}}/img/post-bg-qsz3.jpg)

可见这里主要涉及如何处理缺失值，而不同情况，方式也不同。比如，类似奥运会或其他每隔几年一次的事件，就没必要把缺失的年代调整为0了。

缺失值是数据集中的隐藏杀手，一直是极其危险的存在，无论如何对其保持谨慎都不为过。

本文转载于知乎海数据实验室。